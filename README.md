# Salary

Решение состоит из трёх проектов.

API - веб-API, основной проект.

Console - консольное приложение, первый проект на базе .NET, затем переведённый на Core, сейчас только поддерживаемый, но не развиваемый.

MVC - веб-приложение с БД MSSQL, сделанное для:
- реализации простейших автогенерируемых графического интерфейса и валидации вводимых данных (по сравнению с альтернативами - WinForms/WPF для Console или фронт-части на базе специализированного фреймворка для API);
- практики MVC;
- практики MSSQL.

Расшифровка составляющих задания:
[+] - выполнено или исправлено в проекте API;
[mvc] - выполнено в проекте MVC;
[*] - выполнено частично;
[-] - не выполнено.

Для запуска Console на чистой Windows необходимо:
1. Установить .NET Core Runtime 2.2 — https://dotnet.microsoft.com/download/thank-you/dotnet-runtime-2.2.6-windows-hosting-bundle-installer
2. Установить, при необходимости, дополнительные пакеты для .NET Core в соотв. с требованиями — https://docs.microsoft.com/en-us/dotnet/core/windows-prerequisites?tabs=netcore2x

# Задание

Для отдела HR одной компании нужно написать приложение расчета заработной платы.
В компании работают сотрудники, характеризующиеся именем, датой поступления на работу, группой и базовой ставкой заработной платы.
Есть 3 группы сотрудников - Employee, Manager и Salesman. У каждого сотрудника может быть начальник. У каждого сотрудника кроме Employee могут быть подчинённые.
Зарплата сотрудника рассчитывается следующим образом:
⦁	Employee - это базовая ставка плюс 3% за каждый год работы, но не больше 30% суммарной надбавки. 
⦁	Manager - это базовая ставка плюс 5% за каждый год работы, но не больше 40% суммарной надбавки за стаж работы. Плюс 0,5% зарплаты всех подчинённых первого уровня.
⦁	Salesman - это базовая ставка плюс 1% за каждый год работы в компании, но не больше 35% суммарной надбавки за стаж работы. Плюс 0,3% зарплаты всех подчинённых всех уровней.
⦁	У сотрудников (кроме Employee) может быть любое количество подчинённых любой группы.
Требуется: составить структуру классов, описывающих данную модель, а также реализовать алгоритм расчета зарплаты каждого сотрудника на произвольный момент времени, а также подсчёт суммарной зарплаты всех сотрудников фирмы в целом.
Замечание: при реализации тестового задания необходимо предположить, что вы разрабатываете не просто прототип, а систему enterprise уровня, соответственно важнее продемонстрировать архитектурно более красивое решение, даже в ущерб быстродействию. Не обязательно реализовывать всю архитектуру в полном объёме, не реализованные или упрощённые моменты нужно прокомментировать.
Решение: нужно сделать на C# с использованием sqlite, применяя любые библиотеки.
Код передать в виде репозитория git на github или аналоге.

Дополнительные плюсы:
[-]	Написан краткий обзор решения тестовой задачи, описана архитектура, ее плюсы и минусы (что можно улучшить, поменять или еще какие-то соображения для использования решения в реальных целях).
[*]	Код покрыт тестами — пока только unit, без интеграционных.
[mvc]	Программа имеет графический интерфейс.
[+]	Будет возможность просмотреть для выбранного сотрудника список его подчинённых.
[+]	Будет возможность добавлять новых сотрудников разных видов
[-]	Будет возможность разграничения прав, каждый сотрудник будет иметь свой логин/пароль, имея возможность просматривать только свою зарплату, и зарплату своих подчинённых. Также должен быть супер-пользователь, который имеет доступ ко всем.

# Фидбек

Плюсы:
• Попытка использований паттерна фабрика
• Есть оптимизация по методу жадного алгоритма через кэш
• Есть вариант типа dto
• Аккуратный код
Минусы:
[+] ORM в пакетах есть, но использует ado.net
[+] ТЗ не выполнено, добавить/удалить/изменить ничего нельзя
[+] Из коробки не работало (пришлось допиливать проект), не правильно выставлена платформа относительно пакетов, нет копирования БД в папку
[+] Чистые sql запросы
[+] Все захардкожено
[+] Проблема с найменгом почему класс с I
[*] Разбор иерархии только первого уровня — не понял совсем
 
# Баллы

№	Критерий	Балл	Максимальны балл	Комментарий		Проходной минимум			
[+]	Проект собирается и запускается
[+]	Использование git Есть git-ренпозиторий, Есть коммиты (не один)
[+]	Есть иерархия классов
[+]	Расчет ЗП по всем сотрудникам Сотрудник, менеджер, продажник
[*]	Тесты
[-]	Форма логина Пароль хранится не в открытом виде
[+]	Использование ORM
[+]	Использование DI
[mvc] Валидация вставляемых данных
[*]	Создание БД	+1 балл за наполнение данных — не понял, нужно ли писать хардкод, который наполняет бд вручную
[+]	Редактирование объектов	Добавление, редактирование, удаление
[*]	Форматирование кода	Субъективная оценка (Сахар, форматирование, нэйминг)
[-]	Архитектура	DAL, BL, etc... (разделения приложения на уровни работы с данными, слоя бизнес логики, отображения)
									
# Доп комментарии

[+] авто развертывание бд с миграцией
[+] использование каких либо паттернов (MVVM/MVC/MVP)
[+] ассинхронность;

1.7

- add endpoint & unit tests for subs salary
- add unit tests for salary endpoints
- edit api frontend
- repair console
- delete movie mvc tutorial

1.6

- add unit tests by fake class & moq framework
- change db context to repository in controller
- add repository di in startup
- add db migrations
- split db read to console & api methods
- delete tutorial parts of api & mvc

1.5

- add routing for endpoint return of calculations
- model, controller, context etc rename
- class program static to instance change
- extract program methods from application main
- add string interpolations
- add new migrations to mvc
- consoleapp src folder rename to console
- revert project dependency
- add mvcmovie tutorial
- add pic for 17/1/17